---
import fs from "node:fs/promises";
import BlogPostProse from "../components/BlogPostProse.astro";
import BaseHead from "../components/common/BaseHead.astro";
import SiteFooter from "../components/common/SiteFooter.astro";
import SiteHeader from "../components/common/SiteHeader.astro";

const { title, description, publishDate, author, permalink, tags,  notebook_html_path } = Astro.props;

console.log(notebook_html_path)

let html = "";
if (notebook_html_path) {
    const url = new URL(notebook_html_path, import.meta.url);
    html = await fs.readFile(url, "utf-8");
}
---

<html lang="es">
    <head>
        <BaseHead
            title={title}
            description={description}
            permalink={permalink}
            highlight={true}
        />
    </head>

    <body>
        <SiteHeader />

        <BlogPostProse {title} {author} {publishDate} {tags}>
        {notebook_html_path? (
            <div class="notebook-content" set:html={html} />
        ):(
            <slot />
        )}
</BlogPostProse>

        <SiteFooter />
    </body>
</html>
